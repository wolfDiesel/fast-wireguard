# Руководство по разработке

## Git хуки

FastWG использует git хуки для обеспечения качества кода перед отправкой изменений. Хуки автоматически запускают:

1. **Проверки стиля кода** (flake8)
2. **Проверки форматирования** (black)
3. **Проверки сортировки импортов** (isort)
4. **Тесты** (unittest)

### Установка

Для установки git хуков:

```bash
./install-hooks.sh
```

### Ручное использование

Вы можете запустить проверки вручную:

```bash
# Запустить все проверки
./.git/hooks/pre-push

# Запустить отдельные проверки
flake8 fastwg/ tests/ --max-line-length=127 --max-complexity=10
black --check --diff fastwg/ tests/
isort --check-only --diff fastwg/ tests/
python run_tests.py
```

### Обход хуков

Если нужно обойти pre-push хуки (не рекомендуется):

```bash
git push --no-verify
```

### Конфигурация

Хуки используют следующую конфигурацию:

- **flake8**: `.flake8` - Правила стиля кода
- **black**: `pyproject.toml` - Правила форматирования
- **isort**: `pyproject.toml` - Правила сортировки импортов

### Устранение проблем

Если хуки не проходят:

1. **Ошибки стиля**: Запустите `black fastwg/ tests/` и `isort fastwg/ tests/`
2. **Ошибки тестов**: Исправьте падающие тесты
3. **Ошибки импортов**: Проверьте правильность всех импортов

## Инструменты разработки

### Необходимые инструменты

```bash
pip install flake8 black isort mypy coverage
```

### Качество кода

- **flake8**: Проверки стиля и сложности кода
- **black**: Автоматическое форматирование кода
- **isort**: Сортировка импортов
- **mypy**: Проверка типов (опционально)

### Тестирование

```bash
# Запустить все тесты
python run_tests.py

# Запустить с покрытием
coverage run --source=fastwg run_tests.py
coverage report
coverage html  # Создает htmlcov/index.html
```

## Структура проекта

```
fastwg/
├── fastwg/           # Основной пакет
│   ├── core/        # Основной функционал
│   ├── models/      # Модели данных
│   ├── utils/       # Утилиты
│   └── locale/      # Переводы
├── tests/           # Набор тестов
├── docs/            # Документация
├── .git/hooks/      # Git хуки
├── .flake8          # Конфигурация flake8
├── pyproject.toml   # Конфигурация проекта
└── run_tests.py     # Запуск тестов
```

## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для функции
3. Внесите изменения
4. Запустите git хуки: `./.git/hooks/pre-push`
5. Зафиксируйте и отправьте изменения
6. Создайте pull request

Git хуки обеспечат соответствие вашего кода стандартам качества проекта.
